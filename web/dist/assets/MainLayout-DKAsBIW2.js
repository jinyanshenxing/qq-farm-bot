import{j as se,k as oe,m as le,n as ae,o as i,c as v,a as t,b as n,w as a,p as m,f as o,q as _,F as A,t as z,s as k,r,e as h,u as ie,v as ue,x as de,y as G,i as w}from"./index-Dyl5uCa_.js";import{u as re}from"./auth-B1At1j8b.js";import{o as O,a as R,c as x}from"./index-Ci_heb7m.js";import{_ as ve,g as ce}from"./_plugin-vue_export-helper-fxonzzrb.js";import"./index-DdI-Egwi.js";const me={class:"main-layout"},pe={class:"sidebar-logo"},_e={key:0,class:"logo-text"},fe={key:0,class:"account-selector"},ge={style:{display:"flex","align-items":"center",gap:"8px"}},ke=["src"],ye={style:{"margin-left":"auto"}},be={class:"sidebar-nav"},Ce={key:0},$e={key:0,class:"nav-divider"},Ae={key:0},ze={key:0},he={key:0},xe={key:0},Se={key:0,class:"nav-divider"},we={key:0},Ue={class:"sidebar-footer"},De={key:0},Le=["title"],Ve={class:"main-content"},Fe={class:"top-bar"},Me={class:"top-bar-left"},He={class:"page-title"},Qe={class:"top-bar-right"},qe={class:"user-info"},Ee={class:"username-text"},Be={class:"content-area"},Ne={class:"sidebar-logo"},Ie={class:"account-selector"},Te={class:"sidebar-nav"},je={__name:"MainLayout",setup(Ge){const g=ie(),d=ue(),C=re(),S=se(),p=h(!1),y=h(!1),f=h([]),l=h(""),P=de(()=>({Dashboard:"æ€»è§ˆ",AccountHome:"é¦–é¡µ",AccountLands:"åœŸåœ°çŠ¶æ€",AccountSettings:"å‚æ•°é…ç½®",AccountLogs:"è¿è¡Œæ—¥å¿—",AdminUsers:"ç”¨æˆ·ç®¡ç†"})[d.name]||"QQå†œåœºåŠ©æ‰‹");function b(u){y.value=!1,g.push(u)}function U(u){u&&d.name!=="Dashboard"&&d.name!=="AdminUsers"&&g.push(`/account/${u}`)}async function D(){try{const u=await ce();f.value=u.data||[],F()}catch{}}oe(()=>d.params.uin,u=>{u&&(l.value=u)},{immediate:!0});function L(u){f.value=u||[],l.value&&!f.value.find(e=>e.uin===l.value)&&(l.value="",d.name!=="Dashboard"&&d.name!=="AdminUsers"&&g.push("/dashboard")),F()}function V(u){const e=f.value.findIndex($=>$.uin===u.userId);e>=0?(f.value[e].status=u.newStatus,u.userState&&Object.assign(f.value[e],{nickname:u.userState.name||f.value[e].nickname,level:u.userState.level,gold:u.userState.gold,exp:u.userState.exp})):D()}function F(){!l.value&&f.value.length>0&&(l.value=f.value[0].uin,d.name==="Dashboard"&&g.push(`/account/${f.value[0].uin}`))}function J(){C.logout(),g.replace("/login")}return le(()=>{D(),O("accounts:list",L),O("bot:statusChange",V)}),ae(()=>{R("accounts:list",L),R("bot:statusChange",V)}),(u,e)=>{const $=r("Sunny"),c=r("el-icon"),M=r("el-option"),H=r("el-select"),Q=r("HomeFilled"),q=r("House"),E=r("Grid"),B=r("Setting"),N=r("Document"),I=r("UserFilled"),K=r("Fold"),W=r("Expand"),T=r("el-button"),X=r("Moon"),j=r("el-tag"),Y=r("User"),Z=r("el-dropdown-item"),ee=r("el-dropdown-menu"),te=r("el-dropdown"),ne=r("router-view");return i(),v("div",me,[t("aside",{class:_(["sidebar",{collapsed:p.value}])},[t("div",pe,[n(c,{size:28,color:"#67C23A"},{default:a(()=>[n($)]),_:1}),p.value?m("",!0):(i(),v("span",_e,"QQå†œåœºåŠ©æ‰‹"))]),p.value?m("",!0):(i(),v("div",fe,[n(H,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value=s),placeholder:"é€‰æ‹©è´¦å·",size:"small",onChange:U,style:{width:"100%"},"popper-class":"dark-select-popper"},{default:a(()=>[(i(!0),v(A,null,G(f.value,s=>(i(),k(M,{key:s.uin,value:s.uin},{default:a(()=>[t("div",ge,[t("img",{src:`https://q1.qlogo.cn/g?b=qq&nk=${s.uin}&s=40`,style:{width:"22px",height:"22px","border-radius":"50%"}},null,8,ke),t("span",null,z(s.nickname||s.uin),1),t("span",ye,z(s.status==="running"?"ğŸŸ¢":"âšª"),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])),t("nav",be,[t("div",{class:_(["nav-item",{active:o(d).name==="Dashboard"}]),onClick:e[1]||(e[1]=s=>o(g).push("/dashboard")),title:"æ€»è§ˆ"},[n(c,{size:22},{default:a(()=>[n(Q)]),_:1}),p.value?m("",!0):(i(),v("span",Ce,"æ€»è§ˆ"))],2),p.value?m("",!0):(i(),v("div",$e,"å½“å‰è´¦å·")),t("div",{class:_(["nav-item",{active:o(d).name==="AccountHome",disabled:!l.value}]),onClick:e[2]||(e[2]=s=>l.value&&o(g).push(`/account/${l.value}`)),title:"é¦–é¡µ"},[n(c,{size:22},{default:a(()=>[n(q)]),_:1}),p.value?m("",!0):(i(),v("span",Ae,"é¦–é¡µ"))],2),t("div",{class:_(["nav-item",{active:o(d).name==="AccountLands",disabled:!l.value}]),onClick:e[3]||(e[3]=s=>l.value&&o(g).push(`/account/${l.value}/lands`)),title:"åœŸåœ°"},[n(c,{size:22},{default:a(()=>[n(E)]),_:1}),p.value?m("",!0):(i(),v("span",ze,"åœŸåœ°"))],2),t("div",{class:_(["nav-item",{active:o(d).name==="AccountSettings",disabled:!l.value}]),onClick:e[4]||(e[4]=s=>l.value&&o(g).push(`/account/${l.value}/settings`)),title:"é…ç½®"},[n(c,{size:22},{default:a(()=>[n(B)]),_:1}),p.value?m("",!0):(i(),v("span",he,"é…ç½®"))],2),t("div",{class:_(["nav-item",{active:o(d).name==="AccountLogs",disabled:!l.value}]),onClick:e[5]||(e[5]=s=>l.value&&o(g).push(`/account/${l.value}/logs`)),title:"æ—¥å¿—"},[n(c,{size:22},{default:a(()=>[n(N)]),_:1}),p.value?m("",!0):(i(),v("span",xe,"æ—¥å¿—"))],2),o(C).isAdmin?(i(),v(A,{key:1},[p.value?m("",!0):(i(),v("div",Se,"ç®¡ç†")),t("div",{class:_(["nav-item",{active:o(d).name==="AdminUsers"}]),onClick:e[6]||(e[6]=s=>o(g).push("/admin/users")),title:"ç”¨æˆ·ç®¡ç†"},[n(c,{size:22},{default:a(()=>[n(I)]),_:1}),p.value?m("",!0):(i(),v("span",we,"ç”¨æˆ·ç®¡ç†"))],2)],64)):m("",!0)]),t("div",Ue,[t("div",{class:"nav-item",onClick:e[7]||(e[7]=s=>p.value=!p.value),title:"æŠ˜å "},[n(c,{size:20},{default:a(()=>[p.value?(i(),k(W,{key:1})):(i(),k(K,{key:0}))]),_:1}),p.value?m("",!0):(i(),v("span",De,"æŠ˜å "))]),t("div",{class:_(["connection-dot",{online:o(x)}]),title:o(x)?"å·²è¿æ¥":"å·²æ–­å¼€"},null,10,Le)])],2),t("main",Ve,[t("header",Fe,[t("div",Me,[n(T,{class:"mobile-menu-btn",icon:u.Menu,text:"",onClick:e[8]||(e[8]=s=>y.value=!y.value)},null,8,["icon"]),t("h2",He,z(P.value),1)]),t("div",Qe,[n(T,{class:"theme-toggle-btn",circle:"",size:"small",onClick:e[9]||(e[9]=s=>o(S).toggle()),title:o(S).isDark?"åˆ‡æ¢åˆ°æ—¥é—´æ¨¡å¼":"åˆ‡æ¢åˆ°å¤œé—´æ¨¡å¼"},{default:a(()=>[n(c,{size:16},{default:a(()=>[o(S).isDark?(i(),k(X,{key:0})):(i(),k($,{key:1}))]),_:1})]),_:1},8,["title"]),n(j,{type:o(x)?"success":"danger",effect:"dark",size:"small",round:""},{default:a(()=>[w(z(o(x)?"å·²è¿æ¥":"å·²æ–­å¼€"),1)]),_:1},8,["type"]),n(te,{trigger:"click"},{dropdown:a(()=>[n(ee,null,{default:a(()=>[n(Z,{onClick:J},{default:a(()=>[...e[19]||(e[19]=[w("é€€å‡ºç™»å½•",-1)])]),_:1})]),_:1})]),default:a(()=>[t("span",qe,[n(c,null,{default:a(()=>[n(Y)]),_:1}),t("span",Ee,z(o(C).username),1),o(C).isAdmin?(i(),k(j,{key:0,type:"warning",size:"small",effect:"plain"},{default:a(()=>[...e[18]||(e[18]=[w("ç®¡ç†å‘˜",-1)])]),_:1})):m("",!0)])]),_:1})])]),t("div",Be,[(i(),k(ne,{key:o(d).fullPath}))])]),y.value?(i(),v("div",{key:0,class:"mobile-overlay",onClick:e[10]||(e[10]=s=>y.value=!1)})):m("",!0),t("aside",{class:_(["mobile-sidebar",{open:y.value}])},[t("div",Ne,[n(c,{size:28,color:"#67C23A"},{default:a(()=>[n($)]),_:1}),e[20]||(e[20]=t("span",{class:"logo-text"},"QQå†œåœºåŠ©æ‰‹",-1))]),t("div",Ie,[n(H,{modelValue:l.value,"onUpdate:modelValue":e[11]||(e[11]=s=>l.value=s),placeholder:"é€‰æ‹©è´¦å·",size:"small",onChange:U,style:{width:"100%"}},{default:a(()=>[(i(!0),v(A,null,G(f.value,s=>(i(),k(M,{key:s.uin,label:`${s.nickname||s.uin}`,value:s.uin},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t("nav",Te,[t("div",{class:_(["nav-item",{active:o(d).name==="Dashboard"}]),onClick:e[12]||(e[12]=s=>b("/dashboard"))},[n(c,{size:22},{default:a(()=>[n(Q)]),_:1}),e[21]||(e[21]=t("span",null,"æ€»è§ˆ",-1))],2),l.value?(i(),v(A,{key:0},[e[26]||(e[26]=t("div",{class:"nav-divider"},"å½“å‰è´¦å·",-1)),t("div",{class:_(["nav-item",{active:o(d).name==="AccountHome"}]),onClick:e[13]||(e[13]=s=>b(`/account/${l.value}`))},[n(c,{size:22},{default:a(()=>[n(q)]),_:1}),e[22]||(e[22]=t("span",null,"é¦–é¡µ",-1))],2),t("div",{class:_(["nav-item",{active:o(d).name==="AccountLands"}]),onClick:e[14]||(e[14]=s=>b(`/account/${l.value}/lands`))},[n(c,{size:22},{default:a(()=>[n(E)]),_:1}),e[23]||(e[23]=t("span",null,"åœŸåœ°",-1))],2),t("div",{class:_(["nav-item",{active:o(d).name==="AccountSettings"}]),onClick:e[15]||(e[15]=s=>b(`/account/${l.value}/settings`))},[n(c,{size:22},{default:a(()=>[n(B)]),_:1}),e[24]||(e[24]=t("span",null,"é…ç½®",-1))],2),t("div",{class:_(["nav-item",{active:o(d).name==="AccountLogs"}]),onClick:e[16]||(e[16]=s=>b(`/account/${l.value}/logs`))},[n(c,{size:22},{default:a(()=>[n(N)]),_:1}),e[25]||(e[25]=t("span",null,"æ—¥å¿—",-1))],2)],64)):m("",!0),o(C).isAdmin?(i(),v(A,{key:1},[e[28]||(e[28]=t("div",{class:"nav-divider"},"ç®¡ç†",-1)),t("div",{class:_(["nav-item",{active:o(d).name==="AdminUsers"}]),onClick:e[17]||(e[17]=s=>b("/admin/users"))},[n(c,{size:22},{default:a(()=>[n(I)]),_:1}),e[27]||(e[27]=t("span",null,"ç”¨æˆ·ç®¡ç†",-1))],2)],64)):m("",!0)])],2)])}}},We=ve(je,[["__scopeId","data-v-8704d78e"]]);export{We as default};
